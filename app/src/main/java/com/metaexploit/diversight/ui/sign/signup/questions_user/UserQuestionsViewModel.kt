package com.metaexploit.diversight.ui.sign.signup.questions_user

import androidx.fragment.app.FragmentActivity
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import com.google.android.material.textfield.TextInputLayout
import com.metaexploit.diversight.R
import timber.log.Timber

class UserQuestionsViewModel : ViewModel() {

    // TODO(BUG) - When the user open a menu and click in nextButton the code allows the app continue to next fragment.
    private val _permission: MutableLiveData<Boolean> = MutableLiveData(false)

    fun textIsEmpty(activity: FragmentActivity, editLayout: TextInputLayout) {
        editLayout.editText?.let { edt ->
            val text = edt.text
            if (text.isBlank() || text.toString() == activity.getString(R.string.select)) {
                _permission.value = false
                editLayout.isErrorEnabled = true
                editLayout.error = activity.getString(R.string.empty_input)
            } else {
                _permission.value = true
                editLayout.isErrorEnabled = false
            }
        }
    }

    fun verifyPermission(): Boolean {
        _permission.value?.let {
            return it
        }
        return false
    }

}