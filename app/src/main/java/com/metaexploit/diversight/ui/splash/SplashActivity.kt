package com.metaexploit.diversight.ui.splash

import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.os.CountDownTimer
import androidx.appcompat.app.AppCompatActivity
import androidx.databinding.DataBindingUtil
import com.metaexploit.diversight.R
import com.metaexploit.diversight.databinding.ActivitySplashBinding
import com.metaexploit.diversight.ui.onboard.OnboardActivity
import com.metaexploit.diversight.ui.sign.SignActivity

class SplashActivity : AppCompatActivity() {

    private lateinit var binding: ActivitySplashBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = DataBindingUtil.setContentView(this, R.layout.activity_splash)

        val timer = object: CountDownTimer(2000, 1000) {
            override fun onTick(millisUntilFinished: Long) {}

            override fun onFinish() {
                val onboardPermission = getOnboardPermission()
                val intent = if (onboardPermission) {
                    Intent(this@SplashActivity, OnboardActivity::class.java)
                } else {
                    Intent(this@SplashActivity, SignActivity::class.java)
                }

                startActivity(intent)
            }
        }
        timer.start()
    }

    private fun getOnboardPermission(): Boolean {
//        val sharedPref = this.getSharedPreferences(getString(R.string.id_shared_pref), Context.MODE_PRIVATE)
//        return sharedPref?.getBoolean(getString(R.string.id_onboard_view), true) ?: true
        return false
    }
}